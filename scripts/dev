#!/usr/bin/env bash
# Development helper script

set -e

# Colors
YELLOW='\033[1;33m'
GREEN='\033[0;32m'
NC='\033[0m'

echo -e "${YELLOW}Payment Operations Agent - Development Helper${NC}"

case "${1:-help}" in
    "setup")
        echo -e "${YELLOW}Setting up development environment...${NC}"
        uv sync --dev
        echo -e "${GREEN}Development environment ready!${NC}"
        ;;
    "run")
        echo -e "${YELLOW}Running CLI...${NC}"
        uv run python src/payment_ops/cli.py "${@:2}"
        ;;
    "server")
        echo -e "${YELLOW}Starting MCP server directly...${NC}"
        uv run python src/payment_ops/unified_mcp/server.py
        ;;
    "lint")
        echo -e "${YELLOW}Running linting...${NC}"
        uv run python -m flake8 src/ tests/ --max-line-length=100 --ignore=E203,W503
        ;;
    "format")
        echo -e "${YELLOW}Formatting code...${NC}"
        uv run python -m black src/ tests/ --line-length=100
        ;;
    "help"|*)
        echo "Available commands:"
        echo "  setup   - Set up development environment"
        echo "  run     - Run the CLI with arguments"
        echo "  server  - Start MCP server directly"
        echo "  lint    - Run linting"
        echo "  format  - Format code with black"
        echo "  help    - Show this help"
        ;;
esac